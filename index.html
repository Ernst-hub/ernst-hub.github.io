---
layout: default
---

<div class="home">
  
  {% assign sorted_categories = site.categories | sort %}
  {% for category in sorted_categories %}
    <!-- Collapsible Button for Category -->
    <button onclick="toggleCategory('{{ category[0] | slugify }}')" class="collapsible">{{ category[0] }}</button>

    <!-- Posts within Category, Initially Hidden -->
    <div id="{{ category[0] | slugify }}" class="content">
      <ul class="posts">
        {% assign posts = category[1] | sort: 'date' | reverse %}
        {% for post in posts %}
          <li>
            <span class="post-date">{{ post.date | date: "%b %-d, %Y" }}</span>
            <a class="post-link" href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
            <br>
            {{ post.excerpt }}
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endfor %}
  
</div>

<script>
function toggleCategory(categoryId) {
  var content = document.getElementById(categoryId);
  var collapsible = content.previousElementSibling;
  
  collapsible.classList.toggle("active");

  if (content.style.maxHeight) {
    // If collapsing, hide overflow immediately
    content.style.overflow = 'hidden';
    content.style.maxHeight = null;
  } else {
    // If expanding, set max-height and wait for transition to end to show overflow
    content.style.maxHeight = content.scrollHeight + "px";
    content.addEventListener('transitionend', function () {
      // Only set overflow to auto if the content is still expanded
      if (content.style.maxHeight) {
        content.style.overflow = 'auto';
      }
    }, {
      once: true // Remove the event listener after it has been executed
    });
  } 
}

</script>
